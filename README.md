# Процедура запуска автотестов

## Общая информация
Автотесты разработаны для исполнения в IDE IntellijIDEA с использованием дополнительного ПО:
- Gradle (сборщик проектов)
- JUNIT5 (тестовый фреймворк)
- Faker (библиотека генерации тестовых данных), 
- Allure (библиотега генерации отчетности), 
- Selenide (библиотека для работы с браузером и веб-элементами),
- DBUtils (библиотека доступа к БД),
- Docker Desktop (менеджер контейнеров),
- Git, GitHub (система контроля версий и репозиторий для их хранения),
- DBeaver (или аналог - система для подключения к БД и просмотра содержимого таблиц).

После установки IDE и Gradle все необходимые библиотеки загрузятся автоматически, согласно настройкам в файле *build.gradle*,
Docker Desktop, Git, Dbeaver (или аналог) устанавливаются и настраиваются вручную.

Тестируемое приложение расположено в файле _./artifacts/aqa-shop.jar_ и запускается стандартным способом _java -jar aqa-shop.jar_ на порту _8080_.
В файле _application.properties_ дан ряд типовых настроек:
- учётные данные и URL для подключения к СУБД;
- URL-адреса банковских сервисов.

СУБД для тестирования располагается внутри Docker-контейнера MySql. Настройки для подключения прописаны в файле _docker-compose.yml_

Тесты расположены в основном файле [TourOrderTest.java](src%2Ftest%2Fjava%2Fru%2Fnetology%2Fweb%2Ftest%2FTourOrderTest.java),  
после прогона командой _**./gradlew allureServe**_ формируется подробный отчет с открытием в браузере.

## Шаги для запуска автотестов:
1. Создать и запустить контейнер с СУБД командой `docker-compose up`,
2. Сменить текущую директорию на _/artifacts_ (команда `cd artifacts`) и запустить тестируемое приложение командой 'java -jar aqa-shop.jar', 
3. Вернуться в корневую директорию проекта командой `cd ..` и выполнить запуск автотестов командой `./gradlew clean test` 
4. Отчет, созданный средствами gradle, находится в _./build/reports/tests/test/index.html_
5. Для формирования более подробного отчета средствами Allure выполнить команду `./gradlew allureServe`
6. Остановить тестируемое приложение сочетанием клавиш в консоли `Ctrl+C`
7. Остановить выполнение контейнера в консоли `Ctrl+C`, удалить контейнер командой `docker-compose down`